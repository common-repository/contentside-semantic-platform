{"version":3,"file":"index.js","mappings":"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","sources":["webpack://csp-plugin/./src/admin/js/meta-box/meta-box.js","webpack://csp-plugin/./src/admin/js/settings/admin-settings.js","webpack://csp-plugin/./src/admin/js/toolbar/components/related-post-result-table.js","webpack://csp-plugin/./src/admin/js/toolbar/components/related-posts-modal.js","webpack://csp-plugin/./src/admin/js/toolbar/components/toolbar-custom-button.js","webpack://csp-plugin/./src/admin/js/toolbar/index.js","webpack://csp-plugin/./src/admin/js/toolbar/services/related-posts-client.js","webpack://csp-plugin/external window \"React\"","webpack://csp-plugin/external window [\"wp\",\"apiFetch\"]","webpack://csp-plugin/external window [\"wp\",\"blockEditor\"]","webpack://csp-plugin/external window [\"wp\",\"components\"]","webpack://csp-plugin/external window [\"wp\",\"data\"]","webpack://csp-plugin/external window [\"wp\",\"element\"]","webpack://csp-plugin/external window [\"wp\",\"i18n\"]","webpack://csp-plugin/external window [\"wp\",\"richText\"]","webpack://csp-plugin/webpack/bootstrap","webpack://csp-plugin/webpack/runtime/compat get default export","webpack://csp-plugin/webpack/runtime/define property getters","webpack://csp-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://csp-plugin/webpack/runtime/make namespace object","webpack://csp-plugin/./src/index.js"],"sourcesContent":["const {__} = wp.i18n;\n\nconst MetaBox = {\n    bindEvents: () => {\n        const button = document.querySelector('.csp-plugin-discover');\n        if (button) {\n            button.addEventListener('click', MetaBox.syncClickHandle)\n        }\n\n        const removePostButtons = document.querySelectorAll(\"[id^='csp-plugin-remove-related-post-button']\");\n        if (removePostButtons) {\n            removePostButtons.forEach(removePostButton => {\n                removePostButton.addEventListener('click', MetaBox.removeRelatedPost)\n            });\n        }\n    },\n    syncClickHandle: (e) => {\n        const button = e.target;\n\n        e.preventDefault();\n\n        const spinnerElement = document.createElement('div');\n        spinnerElement.className = 'spinner csp-plugin-spinner';\n        button.after(spinnerElement);\n\n        const ajaxUrl = button.getAttribute('data-ajaxurl');\n        const data = {\n            action: button.getAttribute('data-action'),\n            nonce: button.getAttribute('data-nonce'),\n            postId: button.getAttribute('data-postId')\n        }\n\n        fetch(ajaxUrl, {\n            method: 'POST', headers: {\n                'Content-Type': 'application/x-www-form-urlencoded', 'Cache-Control': 'no-cache',\n            }, body: new URLSearchParams(data),\n        })\n            .then(response => response.json())\n            .then(response => {\n                spinnerElement.parentNode.removeChild(spinnerElement);\n                if (!response.success) {\n                    alert(__('An error occurred and the synchronization could not start', 'csp-plugin'))\n                    throw new Error(`Response content : ${response.data}`);\n                }\n\n                return response.data;\n            })\n            .then(data => {\n                MetaBox.replaceRelatedPostsTableContent(data);\n            })\n            .catch(error => console.error(error));\n    },\n    removeRelatedPost: (e) => {\n        const button = e.target;\n\n        e.preventDefault();\n\n        const spinnerElement = document.createElement('div');\n        spinnerElement.className = 'spinner csp-plugin-spinner';\n        button.after(spinnerElement);\n\n        const ajaxUrl = button.getAttribute('data-ajaxurl');\n        const data = {\n            action: button.getAttribute('data-action'),\n            nonce: button.getAttribute('data-nonce'),\n            postId: button.getAttribute('data-postId'),\n            relatedPost: button.getAttribute('data-relatedPost'),\n        }\n\n        fetch(ajaxUrl, {\n            method: 'POST', headers: {\n                'Content-Type': 'application/x-www-form-urlencoded', 'Cache-Control': 'no-cache',\n            }, body: new URLSearchParams(data),\n        })\n            .then(response => response.json())\n            .then(response => {\n                spinnerElement.parentNode.removeChild(spinnerElement);\n                if (!response.success) {\n                    spinnerElement.parentNode.removeChild(spinnerElement);\n                    alert(__('An error occurred.', 'csp-plugin'))\n                    throw new Error(`Response content : ${response.data}`);\n                }\n\n                return response.data;\n            })\n            .then(data => {\n                MetaBox.replaceRelatedPostsTableContent(data);\n            })\n            .catch(error => {\n                spinnerElement.parentNode.removeChild(spinnerElement);\n                alert(__('An error occurred.', 'csp-plugin'))\n                console.error(error);\n            });\n    },\n    replaceRelatedPostsTableContent: (data) => {\n        document.querySelector('#csp-plugin-related-posts-meta-box > .inside').innerHTML = data.metaBoxContent;\n        MetaBox.bindEvents();\n    }\n};\n\nexport default MetaBox;\n","import apiFetch from '@wordpress/api-fetch';\n\nconst {__} = wp.i18n;\nconst $ = jQuery;\n\nconst AdminSettings = {\n    bindEvents: () => {\n        const button = document.querySelector('.csp-plugin-start-transaction-button');\n        if (button) {\n            button.addEventListener('click', AdminSettings.clickHandle)\n        }\n\n        const progress = document.querySelector('#csp-plugin_sync_progress');\n        if (progress) {\n            setInterval(() => {\n                AdminSettings.followSynchronization();\n            }, 10000);\n        }\n    },\n    followSynchronization: () => {\n        apiFetch({\n            path: '/csp-plugin/v1/related-posts/nb-already-synced',\n            method: 'GET',\n        }).then((response) => {\n            document.querySelector('#csp-plugin_sync_progress').setAttribute(\"value\", response.nbPostSynced);\n            document.querySelector('#csp-plugin_setting_sync_count').setAttribute(\"value\", response.nbPostSynced);\n            document.querySelector('#csp-plugin_sync_indicator').innerHTML = response.nbPostSynced;\n        }).catch((err) => {\n            console.error(err);\n        });\n    },\n    clickHandle: (e) => {\n        const button = e.target;\n        e.preventDefault();\n\n        const ajaxUrl = button.getAttribute('data-ajaxurl');\n        const data = {\n            action: button.getAttribute('data-action'),\n            nonce: button.getAttribute('data-nonce')\n        }\n\n        fetch(ajaxUrl, {\n            method: 'POST', headers: {\n                'Content-Type': 'application/x-www-form-urlencoded', 'Cache-Control': 'no-cache',\n            }, body: new URLSearchParams(data),\n        })\n            .then(response => response.json())\n            .then(response => {\n                if (!response.success) {\n                    alert(__('An error occurred and the synchronization could not start', 'csp-plugin'))\n                    throw new Error(`Response content : ${response.data}`);\n                }\n\n                return response.data;\n            })\n            .then(({synchId}) => {\n                const noticeText = __('Synchronization nÂ°%d started.', 'csp-plugin').replace('%d', synchId);\n                $('.wrap').prepend(`<div class='notice notice-success dismiss-after-delay'><p><strong>${noticeText}</strong></p></div>`);\n                setTimeout(() => {\n                    $('.dismiss-after-delay').remove();\n                }, 20000);\n            })\n            .catch(error => console.error(error));\n    }\n};\n\nexport default AdminSettings;\n","import {\n    Spinner,\n    Button\n} from '@wordpress/components';\nimport {toggleFormat} from '@wordpress/rich-text';\nimport { __ } from '@wordpress/i18n';\n\nexport const RelatedPostResultTable = ({\n                                           isLoading,\n                                           posts,\n                                           value,\n                                           onChange,\n                                           setOpen,\n                                           permalinks\n                                       }) => {\n\n    const handleSelection = (post) => {\n        setOpen(false);\n        onChange(\n            toggleFormat(\n                value, {\n                    type: 'csp-plugin/link-to-related-post',\n                    attributes: {\n                        href: permalinks[post.ID]\n                    }\n                }\n            )\n        );\n    }\n\n    return (\n        <div className={\"csp-plugin-related-posts-modal-related-post-result-table-container\"}>\n            <table className={\"wp-list-table widefat fixed pages sortable \"}>\n                {isLoading && <tr>\n                    <td>\n                        <Spinner/>\n                    </td>\n                </tr>\n                }\n\n                {(!isLoading && posts.length > 0) ? posts.map((post) => (\n                    <tr>\n                        <td>\n                            <strong>{post.post_title}</strong>\n                            <Button className={\"float-right\"} onClick={() => handleSelection(post)}\n                                    variant=\"primary\">{__(\"Select\", \"csp-plugin\")}</Button>\n                        </td>\n                    </tr>\n                )) : (!isLoading ? <tr>\n                    <td><span>{__(\"No result\", \"csp-plugin\")}</span></td>\n                </tr> : <></>)\n                }\n            </table>\n        </div>\n    );\n}","import {Button, Modal} from '@wordpress/components';\nimport {useState} from '@wordpress/element';\nimport {RelatedPostResultTable} from \"./related-post-result-table\";\nimport {useEffect} from \"react\";\nimport {useSelect} from '@wordpress/data';\nimport {__} from '@wordpress/i18n';\nimport {RelatedPostsClient} from \"../services/related-posts-client\";\n\nconst validateData = (data) => {\n    const invalidFields = [\"title\", \"content\", \"introduction\"].filter((field) => {\n        return (!data[field] || data[field] === \"\");\n    });\n\n    if (invalidFields.length > 0) {\n        return invalidFields;\n    }\n\n    return true;\n}\nexport const RelatedPostsModal = ({open, setOpen, value, onChange, selectedText}) => {\n    const closeModal = () => setOpen(false);\n\n    const [isLoading, setIsLoading] = useState(true);\n    const [posts, setPosts] = useState([]);\n    const [permalinks, setPermalinks] = useState([]);\n\n    const selectedBlock = useSelect((select) => {\n        return select('core/block-editor').getSelectedBlock();\n    }, []);\n\n    useEffect(() => {\n        if (open) {\n            const currentPost = wp.data.select(\"core/editor\").getCurrentPost();\n            const data = {\n                postId: wp.data.select(\"core/editor\").getCurrentPostId(),\n                content: RelatedPostsClient.getContentFromSelectedBlock(selectedBlock, selectedText),\n                introduction: (currentPost.excerpt !== \"\" ? currentPost.excerpt : currentPost.title),\n                title: currentPost.title\n            };\n            if (validateData(data).length > 0) {\n                setOpen(false);\n                return;\n            }\n\n            RelatedPostsClient.fetchRelatedPosts(data)\n                .then((response) => {\n                    setPosts(response.posts);\n                    setPermalinks(response.permalinks);\n                    setIsLoading(false);\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setIsLoading(false);\n                });\n        }\n    }, [open]);\n\n    return (<>\n        {open && (\n            <Modal className={\"csp-plugin-related-posts-modal\"} title={__('Choose the related post', 'csp-plugin')}\n                   onRequestClose={closeModal}>\n\n                <RelatedPostResultTable\n                    isLoading={isLoading}\n                    posts={posts}\n                    value={value}\n                    onChange={onChange}\n                    setOpen={setOpen}\n                    permalinks={permalinks}\n                />\n\n                <Button className={\"csp-plugin-related-posts-modal-button\"} variant=\"secondary\"\n                        onClick={closeModal}>\n                    {__('Cancel', 'csp-plugin')}\n                </Button>\n\n                <Button className={\"csp-plugin-related-posts-modal-button\"} variant=\"primary\" onClick={closeModal}>\n                    {__('Save', 'csp-plugin')}\n                </Button>\n            </Modal>)}\n    </>);\n};\n","import {RelatedPostsModal} from \"./related-posts-modal\";\nimport { __ } from '@wordpress/i18n';\nimport {BlockControls} from '@wordpress/block-editor';\nimport {getTextContent, slice} from '@wordpress/rich-text';\nimport {ToolbarGroup, ToolbarButton} from '@wordpress/components';\nimport {useSelect} from '@wordpress/data';\nimport {useState} from '@wordpress/element';\n\nexport const ToolbarCustomButton = ({value, ...props}) => {\n    const [isModalOpen, setModalOpen] = useState(false);\n\n    const selectedBlock = useSelect((select) => {\n        return select('core/block-editor').getSelectedBlock();\n    }, []);\n\n    // We can only update the paragraph blocks\n    if (selectedBlock && selectedBlock.name !== 'core/paragraph') {\n        return null;\n    }\n\n    // We will display the button only if some text is selected\n    const selectedText = getTextContent(slice(value));\n    if (selectedText === '') {\n        return null;\n    }\n\n    return (\n        <>\n            <BlockControls>\n                <ToolbarGroup>\n                    <ToolbarButton\n                        icon=\"search\"\n                        title={__('CSP Related posts', 'csp-plugin')}\n                        onClick={() => {\n                            setModalOpen(true);\n                        }}\n                    />\n                </ToolbarGroup>\n            </BlockControls>\n\n            <RelatedPostsModal\n                open={isModalOpen}\n                setOpen={setModalOpen}\n                selectedBlock={selectedBlock}\n                selectedText={selectedText}\n                value={value}\n                {...props}\n            />\n        </>\n    );\n}","import {registerFormatType} from '@wordpress/rich-text';\nimport {ToolbarCustomButton} from \"./components/toolbar-custom-button\";\n\nconst Toolbar = {\n    register: () => {\n        registerFormatType('csp-plugin/link-to-related-post', {\n            title: 'CSP Related post',\n            tagName: 'a',\n            className: 'csp-plugin-related-post-link',\n            edit: ToolbarCustomButton\n        });\n    }\n}\n\nexport default Toolbar;\n\n\n","import apiFetch from '@wordpress/api-fetch';\n\nexport const RelatedPostsClient = {\n    fetchRelatedPosts: (data) => {\n        return apiFetch({\n            path: '/csp-plugin/v1/related-posts',\n            method: 'POST',\n            data: data\n        })\n    },\n\n    getContentFromSelectedBlock: (selectedBlock, selectedText) => {\n        return (selectedBlock.attributes.content !== \"\" ? selectedBlock.attributes.content : selectedText);\n    }\n}","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"richText\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Entrypoint for all the js scripts enqueued in the admin\n */\nimport AdminSettings from './admin/js/settings/admin-settings';\nimport MetaBox from './admin/js/meta-box/meta-box';\nimport Toolbar from \"./admin/js/toolbar\";\n\nwindow.addEventListener('load', () => {\n    AdminSettings.bindEvents();\n    MetaBox.bindEvents();\n});\n\nwp.domReady(() => {\n    // Block editor\n    Toolbar.register();\n});"],"names":["__","wp","i18n","MetaBox","bindEvents","button","document","querySelector","addEventListener","syncClickHandle","removePostButtons","querySelectorAll","forEach","removePostButton","removeRelatedPost","e","target","preventDefault","spinnerElement","createElement","className","after","ajaxUrl","getAttribute","data","action","nonce","postId","fetch","method","headers","body","URLSearchParams","then","response","json","parentNode","removeChild","success","alert","Error","replaceRelatedPostsTableContent","error","console","relatedPost","innerHTML","metaBoxContent","apiFetch","$","jQuery","AdminSettings","clickHandle","progress","setInterval","followSynchronization","path","setAttribute","nbPostSynced","err","synchId","noticeText","replace","prepend","setTimeout","remove","Spinner","Button","toggleFormat","RelatedPostResultTable","isLoading","posts","value","onChange","setOpen","permalinks","handleSelection","post","type","attributes","href","ID","length","map","post_title","Modal","useState","useEffect","useSelect","RelatedPostsClient","validateData","invalidFields","filter","field","RelatedPostsModal","open","selectedText","closeModal","setIsLoading","setPosts","setPermalinks","selectedBlock","select","getSelectedBlock","currentPost","getCurrentPost","getCurrentPostId","content","getContentFromSelectedBlock","introduction","excerpt","title","fetchRelatedPosts","BlockControls","getTextContent","slice","ToolbarGroup","ToolbarButton","ToolbarCustomButton","props","isModalOpen","setModalOpen","name","registerFormatType","Toolbar","register","tagName","edit","window","domReady"],"sourceRoot":""}